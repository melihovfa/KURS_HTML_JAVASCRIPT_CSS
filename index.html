<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игра "Динозаврик" - Курсы программирования</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .game-container {
            max-width: 800px;
            margin: 100px auto 50px;
            text-align: center;
        }
        
        .game-title {
            margin-bottom: 30px;
        }
        
        canvas {
            border: 2px solid #333;
            background-color: #f8f9fa;
            display: block;
            margin: 0 auto;
            border-radius: var(--radius);
        }
        
        .game-controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .game-info {
            background-color: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-top: 30px;
        }
        
        .back-button {
            display: inline-block;
            margin-top: 30px;
            padding: 10px 30px;
            background-color: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: var(--radius);
            transition: var(--transition);
        }
        
        .back-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .score-display {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <div class="nav-menu">
                <ul class="nav-links">
                    <li><a href="index.html#home">Главная</a></li>
                    <li><a href="index.html#projects">Проекты</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="game-container container">
        <h1 class="game-title">Игра "Динозаврик"</h1>
        <div class="score-display">Счет: <span id="score">0</span></div>
        <canvas id="gameCanvas" width="800" height="300"></canvas>
        
        <div class="game-controls">
            <button id="startBtn" class="btn-primary">Начать игру</button>
            <button id="jumpBtn" class="btn-secondary">Прыжок (Пробел)</button>
            <button id="pauseBtn" class="btn-secondary">Пауза (P)</button>
        </div>
        
        <div class="game-info">
            <h3>Управление:</h3>
            <p><strong>Пробел</strong> или <strong>Клик</strong> - прыжок</p>
            <p><strong>P</strong> - пауза</p>
            <p><strong>R</strong> - перезапуск</p>
            <p>Избегайте кактусов и увеличивайте свой счет!</p>
        </div>
        
        <a href="index.html#projects" class="back-button">← Вернуться к проектам</a>
    </div>

    <script>
        // Игра "Динозаврик"
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');

        let score = 0;
        let gameSpeed = 5;
        let isGameOver = false;
        let isPaused = false;
        let gameFrame = 0;

        // Динозавр
        const dino = {
            x: 50,
            y: 200,
            width: 40,
            height: 60,
            jumping: false,
            jumpForce: 15,
            gravity: 0.8,
            velocity: 0,
            
            draw() {
                ctx.fillStyle = '#4361ee';
                ctx.fillRect(this.x, this.y, this.width, this.height);
                
                // Глаз
                ctx.fillStyle = 'white';
                ctx.fillRect(this.x + 30, this.y + 10, 5, 5);
            },
            
            jump() {
                if (!this.jumping) {
                    this.jumping = true;
                    this.velocity = -this.jumpForce;
                }
            },
            
            update() {
                if (this.jumping) {
                    this.y += this.velocity;
                    this.velocity += this.gravity;
                    
                    if (this.y >= 200) {
                        this.y = 200;
                        this.jumping = false;
                        this.velocity = 0;
                    }
                }
            },
            
            get bottom() {
                return this.y + this.height;
            },
            
            get right() {
                return this.x + this.width;
            }
        };

        // Кактусы
        const cacti = [];
        const cactusWidth = 20;
        const minCactusHeight = 30;
        const maxCactusHeight = 50;

        function createCactus() {
            const height = Math.random() * (maxCactusHeight - minCactusHeight) + minCactusHeight;
            cacti.push({
                x: canvas.width,
                y: 200 + 60 - height,
                width: cactusWidth,
                height: height,
                passed: false
            });
        }

        function drawCacti() {
            ctx.fillStyle = '#27ca3f';
            cacti.forEach(cactus => {
                ctx.fillRect(cactus.x, cactus.y, cactus.width, cactus.height);
            });
        }

        function updateCacti() {
            for (let i = cacti.length - 1; i >= 0; i--) {
                cacti[i].x -= gameSpeed;
                
                // Проверка столкновения
                if (!cacti[i].passed && 
                    dino.x < cacti[i].x + cacti[i].width &&
                    dino.right > cacti[i].x &&
                    dino.y < cacti[i].y + cacti[i].height &&
                    dino.bottom > cacti[i].y) {
                    gameOver();
                }
                
                // Увеличение счета при прохождении кактуса
                if (!cacti[i].passed && cacti[i].x + cacti[i].width < dino.x) {
                    cacti[i].passed = true;
                    score += 1;
                    scoreElement.textContent = score;
                    
                    // Увеличение скорости каждые 10 очков
                    if (score % 10 === 0) {
                        gameSpeed += 0.5;
                    }
                }
                
                // Удаление вышедших за пределы кактусов
                if (cacti[i].x + cacti[i].width < 0) {
                    cacti.splice(i, 1);
                }
            }
        }

        function gameOver() {
            isGameOver = true;
            ctx.font = '30px Arial';
            ctx.fillStyle = '#f72585';
            ctx.fillText('Игра окончена!', canvas.width / 2 - 100, canvas.height / 2);
            ctx.font = '20px Arial';
            ctx.fillText('Нажмите R для перезапуска', canvas.width / 2 - 120, canvas.height / 2 + 40);
        }

        function resetGame() {
            score = 0;
            gameSpeed = 5;
            isGameOver = false;
            cacti.length = 0;
            dino.y = 200;
            dino.jumping = false;
            dino.velocity = 0;
            gameFrame = 0;
            scoreElement.textContent = score;
        }

        function gameLoop() {
            if (isPaused || isGameOver) return;
            
            // Очистка канваса
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Рисование фона
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Земля
            ctx.fillStyle = '#6c757d';
            ctx.fillRect(0, 260, canvas.width, 40);
            
            // Обновление и рисование объектов
            dino.update();
            dino.draw();
            
            updateCacti();
            drawCacti();
            
            // Создание новых кактусов
            gameFrame++;
            if (gameFrame % 90 === 0) {
                createCactus();
            }
        }

        // Управление
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (!isGameOver) dino.jump();
            }
            
            if (e.code === 'KeyP') {
                isPaused = !isPaused;
                if (!isPaused && !isGameOver) {
                    requestAnimationFrame(gameLoop);
                }
            }
            
            if (e.code === 'KeyR' && isGameOver) {
                resetGame();
            }
        });

        canvas.addEventListener('click', () => {
            if (!isGameOver) dino.jump();
        });

        // Кнопки управления
        document.getElementById('startBtn').addEventListener('click', () => {
            resetGame();
            isPaused = false;
            gameLoop();
        });

        document.getElementById('jumpBtn').addEventListener('click', () => {
            if (!isGameOver) dino.jump();
        });

        document.getElementById('pauseBtn').addEventListener('click', () => {
            isPaused = !isPaused;
            if (!isPaused && !isGameOver) {
                gameLoop();
            }
        });

        // Запуск игры
        setInterval(() => {
            if (!isPaused && !isGameOver) {
                gameLoop();
            }
        }, 1000 / 60);
    </script>
</body>
</html>
